pyinstaller-poetry:
  update_version_in:
    - opsiclientd/__init__.py
  one_file: no
  hidden_imports:
    all:
      - csv
    windows:
      - pythoncom
      - win32api
      - win32timezone
    linux: []
    darwin: []
  scripts:
    - script: run-opsiclientd
      binaries:
        - opsiclientd
        - opsiclientd_rpc
        - action_processor_starter
  data_files:
    # from opsiclientd
    - src: opsiclientd_data/common/static_html/*
      dst: opsiclientd_data/static_html/
    - src: opsiclientd_data/${PLATFORM_SYSTEM}/*
      dst: opsiclientd_data/
    # from python-opsi
    - src: ${VENV_SITE_PACKAGES}/python-opsi_data/backendManager/extend.d/10_opsi.conf
      dst: opsiclientd_data/extend.d/10_opsi.conf
    - src: ${VENV_SITE_PACKAGES}/python-opsi_data/backendManager/extend.d/20_legacy.conf
      dst: opsiclientd_data/extend.d/20_legacy.conf
  dirname: opsiclientd
 
changelog:
  4.2.0.0:
    - Ported to python3
    - Switched to pyinstaller for packaging
    - Timeline fetches data using ajax calls and is auto updated every 5 seconds

